<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sheriff Analytics</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Space+Grotesk:wght@400;700&family=Plus+Jakarta+Sans:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&display=swap" rel="stylesheet">

<style>
  :root {
    --accent: #D4AF37;
    --bg-light: #ffffff;
    --bg-dark: #000000;
    --text-light: #000000;
    --text-dark: #ffffff;
    --selected-button: #ccc;
    --logo-text-color: var(--bg-light); /* default for light theme */
  }
  [data-theme='light'] { --bg: var(--bg-light); --text: var(--text-light); --line-color: #444;  --chat--bg: #f9f9f9;;}
  [data-theme='dark'] { --bg: var(--bg-dark); --text: var(--text-dark); --line-color: #f5f0e1; --chat-bg: #111;}
  [data-theme='dark'] {--logo-text-color: var(--bg-dark);}
  /* Home button top-left */
#homeBtn {
  position: fixed;
  top: 1rem;
  left: 1rem;
  z-index: 10;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  border: 1px solid var(--accent);
  background-color: var(--bg);
  color: var(--accent);
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.3s, color 0.3s;
}

#homeBtn:hover {
  background-color: var(--accent);
  color: var(--bg);
}

/* Animated "Sheriff Analytics" */
header h1 {
  font-size: 3rem;
  margin-bottom: 1rem;
  transition: color 0.5s;
  display: inline-block;
}


  body {
    margin: 0;
    font-family: 'Plus Jakarta Sans', 'Inter', 'Space Grotesk', sans-serif;
    background-color: var(--bg);
    color: var(--text);
    transition: background-color 0.3s, color 0.3s;
    overflow-x: hidden;
  }

/* Background chart stays at the very back */
canvas#backgroundChart { 
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100vw;          /* use viewport width */
  height: 100vh;         /* use viewport height */
  z-index: 0;            /* behind everything */
  pointer-events: none;
  opacity: 0.15;
}

@media (max-width: 768px) {
  canvas#backgroundChart {
    display: none !important; /* hide QQQ chart on mobile */
  }
}

  .gold { color: var(--accent); }
  .divider { border-top: 1px solid var(--accent); margin: 2rem 0; opacity: 0.3; }
  header { text-align: center; padding: 8rem 2rem 4rem; position: relative; z-index: 1; }
  header h1 { font-size: 3rem; margin-bottom: 1rem; }
  header h2 { font-size: 1.5rem; font-weight: 400; }
  .scroll-hint { margin-top: 2rem; font-size: 1rem; opacity: 0.7; }

  section { padding: 6rem 2rem; max-width: 900px; margin: auto; position: relative; z-index: 1; }
  section h3 { font-size: 2rem; border-bottom: 2px solid var(--accent); display: inline-block; margin-bottom: 1rem; }
  .about p strong { font-weight: 700; }

  .portfolio { display: flex; gap: 2rem; flex-wrap: wrap; justify-content: center; margin-top: 2rem; }
  .portfolio-card { padding: 1.5rem; border: 1px solid var(--accent); border-radius: 12px; transition: transform 0.3s, box-shadow 0.3s; width: 180px; text-align: center; }
  .portfolio-card:hover { transform: translateY(-5px); box-shadow: 0 4px 20px rgba(0,0,0,0.3); }

  .portfolio-chart-container { width: 100%; max-width: 700px; height: 400px; margin: 2rem auto; position: relative; z-index: 2; }

  .portfolio-filters { display: flex; justify-content: center; gap: 1rem; margin-top: 2rem; }
  .portfolio-filter-btn { padding: 0.5rem 1rem; border: 1px solid var(--accent); border-radius: 6px; cursor: pointer; background: transparent; }
  .portfolio-filter-btn.selected { background: var(--selected-button); }

    /* Insights cards */
  .insights { display: flex; gap: 2rem; flex-wrap: wrap; justify-content: center; margin-top: 2rem; z-index: 2;  }
  .insight-card {
    padding: 1.5rem;
    border: 1px solid var(--accent);
    border-radius: 12px;
    transition: transform 0.3s, box-shadow 0.3s;
    width: 300px;
    max-height: 200px;
    cursor: pointer;
    overflow: hidden;
    position: relative;
    background: var(--bg);
    z-index: 5;
  }
  .insight-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }

  /* Show only first paragraph when collapsed */
  .insight-card p { display: none; margin-top: 0.5rem; }
  .insight-card p:first-of-type { display: block; }

  .insight-card .read-more {
    position: absolute;
    bottom: 1rem;
    right: 1rem;
    background: var(--accent);
    color: #000;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    cursor: pointer;
  }

  /* Overlay behind expanded card */
  .insight-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.3);
    z-index: 9998;
  }

  /* Expanded card */
  .insight-card.expanded {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 1200px;
    max-height: 80%;
    overflow-y: auto;
    z-index: 9999;
    padding: 2rem;
    box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    border-radius: 16px;
    background: var(--bg);
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  }

  /* Show all paragraphs when expanded */
  .insight-card.expanded p { display: block; }
  .contact-form, .socials { max-width: 500px; margin: auto; display: flex; flex-direction: column; gap: 1rem; position: relative; z-index: 1; }
  input, textarea { padding: 0.8rem; border-radius: 6px; border: 1px solid #ccc; }
  button { background-color: var(--accent); border: none; padding: 0.8rem; color: #000; cursor: pointer; border-radius: 6px; }
  .socials a { text-decoration: none; color: var(--accent); font-weight: bold; margin: 0.5rem; }
  .socials a:hover { opacity: 1; }

  .theme-toggle { position: fixed; top: 1rem; right: 1rem; cursor: pointer; padding: 0.5rem 1rem; border-radius: 6px; border: 1px solid var(--accent); z-index: 10; }

#chatbot {
  max-width: 700px;
  margin: 2rem auto;
}

/* Chatbot container */
.chat-container {
  border: 1px solid var(--accent);
  border-radius: 12px;
  padding: 1rem;
  max-width: 600px;
  width: 90%;
  min-height: 400px;
  max-height: 500px;
  margin: 2rem auto;
  display: flex;
  flex-direction: column;
  background: var(--chat--bg);
  position: relative;  /* ensure it stays in document flow */
  z-index: 5;        /* low, so insight cards can appear above */
}

.chat-messages {
  flex-grow: 1;
  overflow-y: auto;           /* scroll when too many messages */
  border-bottom: 1px solid var(--accent);
  padding: 0.5rem 0;
}

.chat-input-container {
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
}
.chat-keywords {
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
  flex-wrap: wrap;
}

.keyword {
  background: #B0B0B0;  /* grey tone */
  color: #000;
  padding: 0.4rem 0.8rem;
  border-radius: 6px;
  font-size: 0.85rem;
  cursor: pointer;
  transition: transform 0.2s, opacity 0.2s;
}

.keyword:hover {
  transform: translateY(-2px);
  opacity: 0.8;
}

.chat-send:hover {
  transform: translateY(-2px);
  opacity: 0.9;
}


.chat-input {
  flex-grow: 1;
  padding: 0.6rem;
  border-radius: 6px;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

.chat-send {
  background-color: var(--accent);
  border: none;
  padding: 0.6rem 1rem;
  color: #000;
  cursor: pointer;
  border-radius: 6px;
}

.chat-message { margin: 0.25rem 0; }
.chat-message.user { font-weight: bold; }

.socials {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  margin-top: 1rem;
}

.social-icon img {
  width: 32px;
  height: 32px;
  filter: invert(48%) sepia(84%) saturate(750%) hue-rotate(3deg) brightness(97%) contrast(94%);
  transition: transform 0.2s, filter 0.2s;
}

.social-icon img:hover {
  transform: scale(1.2);
  filter: invert(76%) sepia(36%) saturate(741%) hue-rotate(0deg) brightness(105%) contrast(101%);
}



/* --- Home logo --- */
.logo-wrapper {
  display: inline-block;       /* remove default inline behavior */
  width: 80px;                /* smaller width */
  height: 50px;                /* smaller height */
  position: fixed;
  top: 1rem;
  left: 1rem;
  cursor: pointer;
  z-index: 1000;
  text-decoration: none;       /* remove underline */
  background: none;            /* remove any background */
  border: none;                /* remove border */
  padding: 0;                  /* remove padding */
  line-height: 0;              /* remove inline spacing */
  overflow: visible;           /* make sure hexagon isn't cut off */
}

/* Forward-leaning hexagon shield */
  .logo-shield {
    width: 100%;
    height: 100%;
    clip-path: polygon(
      20% 0%, 80% 0%, 100% 50%, 
      80% 100%, 20% 100%, 0% 50%
    ); /* Slight forward tilt */
    background: linear-gradient(145deg, #D4AF37, #FFD700);
    filter: invert(48%) sepia(84%) saturate(750%) hue-rotate(3deg) brightness(97%) contrast(94%);
    animation: shieldShift 12s infinite linear, glowPulse 6s infinite ease-in-out;
    box-shadow: 0 0 25px rgba(212,175,55,0.4), inset 0 0 8px rgba(0,0,0,0.3);
    position: relative;
    z-index: 1;
  }

  /* sA text cutting out hexagon */
  .logo-text {
    position: absolute;
    top: 50%;
    left: 45%;
    transform: translate(-50%, -55%) scale(1.05);
    font-family: "Orbitron", sans-serif;
    font-weight: 900;
    font-size: 3.5rem;
    color: var(--logo-text-color); /* now follows theme */
    transition: color 0.5s ease;
    line-height: 1;
    letter-spacing: -0.08em;
    width: 140%;
    text-align: center;
    z-index: 2;
    pointer-events: none;
  }

/* Animations */
@keyframes shieldShift {
  0% { filter: invert(48%) sepia(84%) saturate(750%) hue-rotate(3deg) brightness(97%) contrast(94%); }
  50% { filter: invert(76%) sepia(36%) saturate(741%) hue-rotate(0deg) brightness(105%) contrast(101%); }
  100% { filter: invert(48%) sepia(84%) saturate(750%) hue-rotate(3deg) brightness(97%) contrast(94%); }
}

@keyframes glowPulse {
  0%, 100% { box-shadow: 0 0 25px rgba(212,175,55,0.4), inset 0 0 8px rgba(0,0,0,0.3); }
  50% { box-shadow: 0 0 35px rgba(255,215,0,0.8), inset 0 0 10px rgba(0,0,0,0.4); }
}


</style>
</head>
<!-- Home logo -->
<a href="index.html" class="logo-wrapper" title="Home">
  <div class="logo-shield"></div>
  <span class="logo-text">sA</span>
</a>

<body data-theme="light">

<div class="bg-chart-container">
  <canvas id="backgroundChart"></canvas>
</div>

<button class="theme-toggle">Toggle Theme</button>

<header>


  <h1 class="gold">Sheriff AI Analytics</h1>
  <h2>Data. AI. Insight. Wealth.</h2>
  <div class="divider"></div>
  <div class="scroll-hint">Explore ↓</div>
  
</header>

<section id="about" class="about">
  <h3>About</h3>
  <p><strong>Mission:</strong> To help individuals think strategically about money, risk, and decision-making.</p>
  <p><strong>Philosophy:</strong> Sheriff AI Analytics is a boutique financial research and strategy brand that studies markets through a quantitative and behavioral lens.</p>
  <p><strong>Analysis:</strong> Portfolio optimization, macro insights, and wealth psychology — blending data analysis with AI and personal investing experience.</p>
</section>

<section id="portfolio">
  <h3>Portfolio</h3>

  <div class="portfolio-chart-container">
    <canvas id="portfolioPieChart"></canvas>
  </div>



  <div class="portfolio">
    <div class="portfolio-card">Equities USD<br>31%</div>
    <div class="portfolio-card">Equities CAN<br>42%</div>
    <div class="portfolio-card">Real Estate<br>18%</div>
    <div class="portfolio-card">Cash<br>9%</div>
  </div>

  <div class="portfolio-filters">
    <div class="portfolio-filter-btn selected" data-period="inception">Since Inception</div>
    <div class="portfolio-filter-btn" data-period="1y">1Y</div>
    <div class="portfolio-filter-btn" data-period="ytd">YTD</div>
  </div>

      <div class="portfolio-chart-container">
    <canvas id="portfolioLineChart"></canvas>
  </div>

</section>

<section id="insights">
  <h3>Insights</h3>
  <div class="insights">
    <div class="insight-card">
      <div class="insight-date">2025-10-12</div>
      <h4>Market Volatility Insights</h4>
      <p>Analyzing recent market fluctuations and risk management strategies for investors.</p>
      <div class="read-more">Read More</div>
    </div>
    <div class="insight-card">
      <div class="insight-date">2025-10-10</div>
      <h4>Portfolio Optimization Tips</h4>
      <p>Best practices for balancing equities, bonds, and alternative assets to maximize returns.</p>
      <p>March 2020 was surreal. In just 33 trading days, the S&P 500 fell 34%, and fear was palpable. The VIX spiked above 82 — a level I had never personally experienced. Everyone was asking: “How bad will it get?”

Watching the Fed cut rates to near zero and Congress pass massive stimulus packages was a reminder of how quickly policy can change the game. I adjusted my own portfolio cautiously, increasing cash buffers and leaning into tech and healthcare ETFs that seemed resilient.

The biggest insight wasn’t about timing the bottom — it was about adaptability. Crises accelerate trends. Remote work, digital services, and AI adoption didn’t start in 2020, but they surged forward because of it. By staying flexible and avoiding panic, I was able to navigate the uncertainty and capture the rebound.

The 2020 recession reminded me that markets reward resilience and adaptability, not perfect predictions. Sometimes the smartest move is simply to stay calm, stay informed, and trust your process.</p>
      <div class="read-more">Read More</div>
    </div>
    <div class="insight-card">
      <div class="insight-date">2025-10-08</div>
      <h4>Behavioral Finance Study</h4>
      <p>Exploring how investor psychology affects decision-making and portfolio performance.</p>
      <div class="read-more">Read More</div>
    </div>
  </div>
</section>


<section id="chatbot">
  <h3>Chatbot</h3>
  <p style="font-size:0.9rem; opacity:0.7;">For educational purposes only. This chatbot does not provide financial advice.</p>
<div class="chat-container">
  <div class="chat-messages"></div>
  <div class="chat-input-container">
    <input type="text" class="chat-input" placeholder="Ask me about markets, portfolios, or investing..." />
    <button class="chat-send">Send</button>
  </div>
  <div class="chat-keywords">
  <span class="keyword">Risk Management</span>
  <span class="keyword">Bull Market</span>
  <span class="keyword">Bear Market</span>
  <span class="keyword">Stocks</span>
</div>

</div>
</section>



<section id="socials">
  <h3>Socials</h3>
  <div class="socials">
    <a href="https://www.linkedin.com/in/ejaaz-sheriff-65a73314b" target="_blank" class="social-icon">
      <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg" alt="LinkedIn" />
    </a>
    <a href="https://www.twitter.com/YOUR-HANDLE" target="_blank" class="social-icon">
      <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/twitter.svg" alt="Twitter" />
    </a>
  </div>
</section>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>

// ------------------ QQQ Background Chart ------------------
const qqqData = [589.49,589.5,600.37,570.4,565.01,551.64,519.11,475.47,468.92,508.17,522.29,511.23,509.74,483.85,488.07,476.27,471.07,479.11,450.71,424.59,444.01,439,416.97,409.52,388.83,350.87,358.27,377.99,383.68,369.42,347.99,322.56,320.93,293.56,294.62,266.28,293.36,277.95,267.26,299.27,315.46,280.28,308.28,313.25,362.54,346.8,363.05,397.85,393.82,386.11,357.96,379.95,364.57,354.43,333.93,337.99,319.13,314.14,314.56,313.74,299.62,269.38,277.84,294.88,265.79,247.6,233.36,218.91,190.4,205.8,219.07,212.61,205.1,197.08,188.81,187.47,191.1,186.74,173.95,189.54,179.66,173.19,168.16,154.26,169.37,169.82,185.79,186.65,176.45,171.65,170.07,160.94,160.13,167.21,169.4,155.76,155.15,152.15,145.45,146.2,143.23,137.64,141.29,135.99,132.38,130.02,124.57,118.48,117.5,116.99,118.72,116.44,115.23,107.54,110.34,105.72,109.2,102.5,104.13,111.86,114.02,113.33,101.76,104.31,111.95,107.07,110.05,107.63,105.6,108.4,101.1,103.25,106.01,101.4,98.79,99.78,95.02,93.91,91.31,87.39,87.67,90.34,86.27,87.96,85.73,82.79,78.88,75.47,75.77,71.27,73.25,70.72,68.97,67.1,66.87,65.13,65.8,64.95,68.57,68.16,64.8,64.16,62.06,66.76,67.55,64.41,60.53,55.83,56.39,57.95,52.49,55.06,58,57.05,58.36,59.08,57.43,57.77,56,54.46,52.09,52.18,49.07,43.46,45.81,42.71,45.6,49.24,48.16,44.76,42.79,45.75,43.56,40.96,42.25,40.03,39.45,36.38,35.38,34.28,30.32,27.53,29.06,29.74,29.12,32.89,38.91,46.12,45.46,45.17,50.01,47.21,43.72,42.95,45.13,51.22,51.31,55.03,51.41,48.87,47.53,47.6,47.41,45.96,43.53,43.33,44.07,43.16,44.04,42.58,40.65,38.87,37.1,38.77,38.82,41.85,41.93,41.1,42,40.41,41.24,38.87,39.46,38.98,39.58,36.78,38.08,34.98,36.57,37.22,37.4,39.92,39.12,36.9,35.14,34.02,34.89,37.74,36.55,34.77,35.84,36.57,37.07,36.46,35.38,35.18,32.42,33.39,31.8,29.95,29.79,27.45,25.25,25.16,24.44,24.37,27.72,24.55,20.72,23.49,23.85,26.1,30.04,31.73,36.06,33.78,38.51,38.91,39.65,33.9,28.98,36.63,41.76,45.7,44.73,46.15,39.15,47.45,64.3,58.38,62.98,81.7,88.75,101.63,89.44,93.44,83.13,94.75,109.5,106.75,89.69,91.38,73.5,65.75,60.19,59.69,56.59,57.63,52.03,53.72,52.47];
const ctxBg = document.getElementById('backgroundChart').getContext('2d');
// ------------------ Mobile Check ------------------
function isMobile() {
  return window.innerWidth <= 768; // adjust breakpoint if needed
}


// Initially show first 10 points
const initialPoints = 10;
const initialData = qqqData.slice(0, initialPoints).reverse();

const bgChart = new Chart(ctxBg, {
  type: 'line',
  data: {
    labels: initialData.map((_, i) => i),
    datasets: [{
      data: initialData,
      borderColor: getComputedStyle(document.body).getPropertyValue('--line-color'),
      fill: false,
      pointRadius: 0,
      tension: 0.2
    }]
  },
  options: {
  responsive: true,            // enable responsive scaling
    maintainAspectRatio: false,  // allow container height to control chart height
    plugins: { legend: { display: false } },
    scales: { x: { display: false }, y: { display: false } },
    animation: { duration: 0 }
  }
});

// Resize canvas
function resizeBgChart() {
  const canvas = document.getElementById('backgroundChart');
  canvas.height = window.innerHeight;
  canvas.width = window.innerWidth;
  bgChart.update('none');
}
window.addEventListener('resize', resizeBgChart);
resizeBgChart();

// Scroll effect: reveal more points progressively
window.addEventListener('scroll', () => {
  const scrollFraction = window.scrollY / (document.body.scrollHeight - window.innerHeight);
  const maxIndex = Math.max(initialPoints, Math.floor(scrollFraction * qqqData.length));
  const visibleData = qqqData.slice(0, maxIndex).reverse(); // reverse order
  bgChart.data.labels = visibleData.map((_, i) => i);
  bgChart.data.datasets[0].data = visibleData;
  bgChart.update('none');
});


// Portfolio Line Chart
// ---------------- Portfolio Line Chart ----------------
const lineDataSets = {
  inception: [0, 53.85, 138.46, 123.08, 107.69, 176.92],
  '1y': [0,1.96,9.19,12.33,28.47,33.45,49.27],
  ytd: [0,4.75,7.1,7.47,10.18,20.57,26.01,27.22,30.83,43.49,46.39]
};

function generateLabels(period){
  if(period === 'inception') return ['2020','2021','2022','2023','2024','2025'];
  if(period === '1y') return ['Nov','Jan','Mar','May','Jul','Sep','Nov'];
  if(period === 'ytd') return ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov'];
}

// --- Initial chart data ---
let initialPeriod = 'inception';
let chartData = lineDataSets[initialPeriod];
let chartLabels = generateLabels(initialPeriod);

const lineCtx = document.getElementById('portfolioLineChart').getContext('2d');

const lineChart = new Chart(lineCtx, {
  type: 'line',
  data: {
    labels: chartLabels,
    datasets: [{
      label: 'Portfolio Growth (%)',
      data: chartData,
      borderColor: '#D4AF37',
      backgroundColor: 'rgba(212,175,55,0.2)',
      fill: true,
      tension: 0.3,
      pointRadius: 3,
      pointHoverRadius: 5
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: { legend: { display: true } },
    scales: {
      y: {
        beginAtZero: false,
        ticks: {
          callback: v => v + '%'
        },
        // Smooth Y-axis increments
        suggestedMin: Math.min(...chartData) * 0.9,
        suggestedMax: Math.max(...chartData) * 1.1
      }
    }
  }
});

// --- Portfolio Filter Buttons ---
document.querySelectorAll('.portfolio-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    // Update selected button
    document.querySelectorAll('.portfolio-filter-btn').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');

    const period = btn.dataset.period;
    chartData = lineDataSets[period].slice(0, generateLabels(period).length);
    chartLabels = generateLabels(period);

    // Update chart
    lineChart.data.labels = chartLabels;
    lineChart.data.datasets[0].data = chartData;

    // Update Y-axis suggested range
    lineChart.options.scales.y.suggestedMin = Math.min(...chartData) * 0.9;
    lineChart.options.scales.y.suggestedMax = Math.max(...chartData) * 1.1;

    lineChart.update();
  });
});


// --- Portfolio Filter Buttons ---
document.querySelectorAll('.portfolio-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    // Update selected button
    document.querySelectorAll('.portfolio-filter-btn').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');

    const period = btn.dataset.period;
    initialData = lineDataSets[period].slice(0, generateLabels(period).length);
    initialLabels = generateLabels(period);

    // Update chart
    lineChart.data.labels = initialLabels;
    lineChart.data.datasets[0].data = initialData;

    // Update Y-axis suggested range
    lineChart.options.scales.y.suggestedMin = Math.min(...initialData) * 0.9;
    lineChart.options.scales.y.suggestedMax = Math.max(...initialData) * 1.1;

    lineChart.update();
  });
});

// Portfolio filter buttons
document.querySelectorAll('.portfolio-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.portfolio-filter-btn').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    const period = btn.dataset.period;
    lineChart.data.labels = generateLabels(period);
    lineChart.data.datasets[0].data = lineDataSets[period].slice(0, lineChart.data.labels.length);

    // Recompute min/max and step for new period
    const data = lineDataSets[period];
    const minY = Math.min(...data) * 0.9;
    const maxY = Math.max(...data) * 1.1;
    const range = maxY - minY;
    const step = Math.pow(10, Math.floor(Math.log10(range))) / 2;

    lineChart.options.scales.y.suggestedMin = minY;
    lineChart.options.scales.y.suggestedMax = maxY;
    lineChart.options.scales.y.ticks.stepSize = step;

    lineChart.update();
  });
});

// Portfolio filter buttons
document.querySelectorAll('.portfolio-filter-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.portfolio-filter-btn').forEach(b=>b.classList.remove('selected'));
    btn.classList.add('selected');

    const period = btn.dataset.period;
    const newData = lineDataSets[period].slice(0, generateLabels(period).length);
    lineChart.data.labels = generateLabels(period);
    lineChart.data.datasets[0].data = newData;

    const newLimits = getYAxisLimits(newData);
    lineChart.options.scales.y.min = newLimits.min;
    lineChart.options.scales.y.max = newLimits.max;

    lineChart.update();
  });
});


// Insight Card
// Insight cards expand/collapse
document.querySelectorAll('.insight-card').forEach(card => {
  const readMore = card.querySelector('.read-more');
  const originalParent = card.parentNode;      // store original parent
  const originalIndex = Array.from(originalParent.children).indexOf(card); // store index

  card.addEventListener('click', () => {
    const isExpanded = card.classList.contains('expanded');

    // Remove any existing overlay
    const existingOverlay = document.querySelector('.insight-overlay');
    if(existingOverlay) existingOverlay.remove();

    // Collapse any other expanded card
    document.querySelectorAll('.insight-card.expanded').forEach(other => {
      if(other !== card) {
        other.classList.remove('expanded');
        const otherReadMore = other.querySelector('.read-more');
        if(otherReadMore) otherReadMore.textContent = 'Read More';
        // move back to original parent
        originalParent.insertBefore(other, originalParent.children[originalIndex]);
      }
    });

    if(!isExpanded) {
      // Add overlay
      const overlay = document.createElement('div');
      overlay.classList.add('insight-overlay');
      document.body.appendChild(overlay);

      // Move card to body to ensure it's on top
      document.body.appendChild(card);

      card.classList.add('expanded');
      if(readMore) readMore.textContent = 'Close';

      // Close on overlay click
      overlay.addEventListener('click', () => {
        card.classList.remove('expanded');
        if(readMore) readMore.textContent = 'Read More';
        overlay.remove();
        // Move back to original place
        originalParent.insertBefore(card, originalParent.children[originalIndex]);
      });
    } else {
      card.classList.remove('expanded');
      if(readMore) readMore.textContent = 'Read More';
      // Move back to original place
      originalParent.insertBefore(card, originalParent.children[originalIndex]);
    }
  });
});



// Theme toggle
document.querySelector('.theme-toggle').addEventListener('click',()=>{
  document.body.dataset.theme = document.body.dataset.theme==='light'?'dark':'light';
  bgChart.data.datasets[0].borderColor = getComputedStyle(document.body).getPropertyValue('--line-color');
  bgChart.update('none');
});

// pie chart
const pieCtx = document.getElementById('portfolioPieChart').getContext('2d');
const pieChart = new Chart(pieCtx, {
  type: 'doughnut',
  data: {
    labels: ['Equities USD','Equities CAN','Real Estate','Cash'],
    datasets: [{
      data: [31,42,18,9],
      backgroundColor: ['#D4AF37','#808080','#8C7853','#E0C068'],
      borderWidth: 1
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: { legend: { position: 'bottom' } }
  }
});


// chatbot

// ---------------- Chatbot ----------------
const chatContainer = document.querySelector('.chat-container');
const chatMessages = chatContainer.querySelector('.chat-messages');
const chatInput = chatContainer.querySelector('.chat-input');
const chatSendBtn = chatContainer.querySelector('.chat-send');
const chatKeywords = chatContainer.querySelectorAll('.keyword');

// Helper to append a message
function appendMessage(text, sender = 'bot') {
  const msg = document.createElement('div');
  msg.classList.add('chat-message', sender);
  msg.textContent = text;
  chatMessages.appendChild(msg);
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

// Handle sending user message
function sendMessage() {
  const message = chatInput.value.trim();
  if (!message) return;

  // Append user message
  appendMessage(message, 'user');
  chatInput.value = '';

  // Simple bot response logic
  let response = "I'm here to provide educational insights on markets and investing.";

  const msgLower = message.toLowerCase();
  if (msgLower.includes('risk')) response = "Risk management is key to long-term portfolio success.";
  else if (msgLower.includes('bull')) response = "Bull markets reward patience and disciplined investing.";
  else if (msgLower.includes('bear')) response = "Bear markets are challenging, but opportunities often arise.";
  else if (msgLower.includes('stocks')) response = "Diversification across sectors helps manage volatility.";

  // Simulate bot typing delay
  setTimeout(() => appendMessage(response, 'bot'), 400);
}

// Event listeners
chatSendBtn.addEventListener('click', sendMessage);
chatInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') sendMessage();
});

// Keyword buttons
chatKeywords.forEach(keyword => {
  keyword.addEventListener('click', () => {
    chatInput.value = keyword.textContent;
    sendMessage();
  });
});


// ---------------- Realistic Dark Glowing Ball ----------------
// --- Overlay Canvas ---
const overlayCanvas = document.createElement('canvas');
overlayCanvas.style.position = 'fixed';
overlayCanvas.style.top = 0;
overlayCanvas.style.left = 0;
overlayCanvas.style.width = '100%';
overlayCanvas.style.height = '100%';
overlayCanvas.style.pointerEvents = 'none';
overlayCanvas.style.zIndex = '0';

document.body.appendChild(overlayCanvas);

const ctx = overlayCanvas.getContext('2d');
function resizeOverlay() {
  overlayCanvas.width = window.innerWidth;
  overlayCanvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeOverlay);
resizeOverlay();

// --- Colors ---
const colors = [
  { glow: 'rgba(212,175,55,0.3)', fill: 'rgba(212,175,55,0.25)' },
  { glow: 'rgba(0,255,0,0.3)', fill: 'rgba(0,255,0,0.25)' },
  { glow: 'rgba(0,150,255,0.3)', fill: 'rgba(0,150,255,0.25)' }
];
let colorIndex = 0, nextColorIndex = 1, blend = 0;
const colorChangeSpeed = 0.4;

function interpolateColor(c1, c2, t) {
  const nums = rgba => rgba.match(/\d+(\.\d+)?/g).map(Number);
  const [r1,g1,b1,a1] = nums(c1);
  const [r2,g2,b2,a2] = nums(c2);
  return `rgba(${r1+(r2-r1)*t}, ${g1+(g2-g1)*t}, ${b1+(b2-b1)*t}, ${a1+(a2-a1)*t})`;
}

// --- Ball ---
const ball = { radius: 8, progress: 0, speed: 0.05 };
let lastTime = 0;

function animateBall(time) {
  if (!lastTime) lastTime = time;
  const delta = (time - lastTime) / 1000;
  lastTime = time;

  const dataset = bgChart.data.datasets[0].data;
  if (!dataset || dataset.length < 2) {
    requestAnimationFrame(animateBall);
    return;
  }

  // --- Color blending ---
  blend += delta * colorChangeSpeed;
  if (blend >= 1) {
    blend = 0;
    colorIndex = nextColorIndex;
    nextColorIndex = (nextColorIndex + 1) % colors.length;
  }
  const glowColor = interpolateColor(colors[colorIndex].glow, colors[nextColorIndex].glow, blend);
  const fillColor = interpolateColor(colors[colorIndex].fill, colors[nextColorIndex].fill, blend);

  // --- Position ---
  const xScale = bgChart.scales.x;
  const yScale = bgChart.scales.y;
  const maxIndex = dataset.length - 1;
  const exactIndex = Math.min(Math.max(ball.progress * maxIndex, 0), maxIndex);
  const i1 = Math.floor(exactIndex);
  const i2 = Math.min(maxIndex, i1 + 1);
  const t = exactIndex - i1;

  const value1 = dataset[i1] ?? dataset[0];
  const value2 = dataset[i2] ?? dataset[dataset.length-1];
  const yValue = value1 * (1 - t) + value2 * t;

  const x = xScale.getPixelForValue(i1) * (1 - t) + xScale.getPixelForValue(i2) * t;
  const y = yScale.getPixelForValue(yValue);

  // --- Clamp positions ---
  const rect = bgChart.canvas.getBoundingClientRect();
  const vx = Math.min(Math.max(rect.left + x, 0), overlayCanvas.width - 1);
  const vy = Math.min(Math.max(rect.top + y, 0), overlayCanvas.height - 1);

  ctx.clearRect(0, 0, overlayCanvas.width, overlayCanvas.height);

  // --- Ball ---
  ctx.beginPath();
  ctx.arc(vx, vy, ball.radius, 0, 2 * Math.PI);
  ctx.fillStyle = fillColor;
  ctx.shadowBlur = 4;
  ctx.shadowColor = glowColor;
  ctx.fill();

// --- Dollar Text (slightly translucent like the ball) ---
ctx.font = "600 14px 'Space Grotesk', sans-serif";

// Interpolate glow color and match the ball's opacity (~0.25 to 0.3)
const interpolated = interpolateColor(colors[colorIndex].fill, colors[nextColorIndex].fill, blend);
ctx.fillStyle = interpolated;

ctx.shadowBlur = 3;
ctx.shadowColor = interpolated;

const text = `$${yValue.toFixed(2)}`;
ctx.fillText(text, Math.min(vx + 12, overlayCanvas.width - 50), Math.max(vy - 6, 14));


  // --- Progress ---
  ball.progress += ball.speed * delta;
  if (ball.progress > 1) ball.progress = 0;

  requestAnimationFrame(animateBall);
}

function updateBgChartVisibility() {
  const canvas = document.getElementById('backgroundChart');
  if (isMobile()) {
    canvas.style.display = 'none';
    overlayCanvas.style.display = 'none';
  } else {
    canvas.style.display = 'block';
    overlayCanvas.style.display = 'block';
    resizeBgChart();
    resizeOverlay();
    requestAnimationFrame(animateBall);
  }
}

// Run once on load
updateBgChartVisibility();

// Re-run on window resize
window.addEventListener('resize', updateBgChartVisibility);



// -------- Home Button Scroll --------
document.getElementById('homeBtn').addEventListener('click', () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});

// -------- Home Logo change colour on theme toggle --------
const toggleBtn = document.querySelector('.theme-toggle');
toggleBtn.addEventListener('click', () => {
  const currentTheme = document.body.getAttribute('data-theme');
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  document.body.setAttribute('data-theme', newTheme);
});



</script>

</body>
</html>
